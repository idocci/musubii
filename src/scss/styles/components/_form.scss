//----------------------------------------------------
// Components: Form
//----------------------------------------------------

//----------------------------------------------------
// / Variables (Default)
//----------------------------------------------------

// Option
$option-mixin-mode: false !default;
$option-style-form: true !default;

// Selectors
$selector-fieldset: ".fieldset" !default;
$selector-input: ".input" !default;
$selector-textarea: ".textarea" !default;

// Input
$input-height: 2.5em !default;
$input-padding: 0.5em 0.75em !default;
$input-background-color: $convert-background-1 !default;
$input-border-width: $global-border-width !default;
$input-border-color: $convert-border !default;
$input-border-radius: $radius-xs !default;
$input-line-height: $line-height-md !default;
$input-shadow: inset 0 1px 1px $convert-shadow-alpha-thin !default;
$input-transition: $global-transition !default;

// Input Placeholder
$input-placeholder-color: $convert-input-placeholder-color !default;

// Input Disabled
$input-disabled-background-color: $convert-disabled-background-color !default;
$input-disabled-border-color: $convert-disabled-border-color !default;
$input-disabled-shadow: inset 0 1px 1px $convert-shadow-alpha-thin !default;
$input-disabled-text-color: $convert-disabled-text-color !default;

// Input Readonly
$input-readonly-background-color: $convert-background-2 !default;
$input-readonly-border-color: $convert-border !default;
$input-readonly-shadow: inset 0 1px 1px $convert-shadow-alpha-thin !default;
$input-readonly-text-color: $convert-body-text-color !default;

// Input Focus
$input-focus-border-color: $convert-focus-darken !default;
$input-focus-shadow: inset 0 1px 1px $convert-shadow-alpha-thin,
  0 0 0 $space-xxs $convert-focus-alpha-thin !default;

// Input Round
$input-round-border-radius: $radius-full !default;

// Pattern - Input Custom
$pattern-input-custom: round !default;

// Input Plain
$input-plain-background-color: $convert-background-2 !default;
$input-plain-border-color: transparent !default;
$input-plain-focus-shadow: 0 0 0 $space-xxs $convert-focus-alpha-thin !default;

// Input Underline
$input-underline-padding-left: 0 !default;
$input-underline-padding-right: 0 !default;
$input-underline-border-width: $global-border-width !default;
$input-underline-border-color: $convert-border !default;

// Input Inside
$input-inside-padding: 0.5em 0.75em !default;

// Pattern - Input Style
$pattern-input-style: plain, underline, inside !default;

// Input Success
$input-success-background-color: $convert-input-success-background-color !default;
$input-success-border-color: $convert-input-success-border-color !default;

// Input Danger
$input-danger-background-color: $convert-input-danger-background-color !default;
$input-danger-border-color: $convert-input-danger-border-color !default;

// Textarea
$textarea-padding: calc(0.5em - 1.5px) 0.5em !default;

// Radio
$radio-size: 1em !default;
$radio-border-width: $global-border-width * 2 !default;
$radio-background-color: $convert-background !default;
$radio-transition: $global-transition !default;
$radio-focus-shadow: 0 0 0 $space-xxs $convert-focus-alpha-thin !default;
$radio-before-checked-background-color: $convert-primary-strong !default;
$radio-checked-border-color: $convert-primary-strong !default;

// Checkbox
$checkbox-size: 1em !default;
$checkbox-border-width: $global-border-width * 2 !default;
$checkbox-border-radius: $radius-xs !default;
$checkbox-background-color: $convert-background !default;
$checkbox-transition: $global-transition !default;
$checkbox-focus-border-color: $convert-focus-darken !default;
$checkbox-focus-shadow: 0 0 0 $space-xxs $convert-focus-alpha-thin !default;
$checkbox-before-border-color: $convert-checkbox-before-border-color !default;
$checkbox-checked-background-color: $convert-primary !default;
$checkbox-checked-border-color: $convert-primary !default;

// Select
$select-angle-size: 0.5em !default;
$select-angle-border-width: $global-border-width * 2 !default;
$select-angle-border-color: $convert-border-1 !default;
$select-transition: $global-transition !default;
$select-focus-shadow: 0 0 0 $space-xxs $convert-focus-alpha-thin !default;

//----------------------------------------------------
// / Mixins (Default)
//----------------------------------------------------

@mixin export-style-form() {
  @if $option-mixin-mode == false and $option-style-form == true {
    @content;
  }
}

//----------------------------------------------------
// / Style - Form Fieldset
//----------------------------------------------------

@mixin musubii-style-form-fieldset() {
  padding: 0;
  border: none;
}

@include export-style-form() {
  #{$selector-fieldset} {
    @include musubii-style-form-fieldset();
  }
}

//----------------------------------------------------
// / Style - Form Input
//----------------------------------------------------

@mixin musubii-style-form-input($padding) {
  position: relative;
  max-width: 100%;
  height: calc(#{$input-height} + (#{$input-border-width} * 2));
  padding: $padding;
  background-color: $input-background-color;
  border: $input-border-width solid $input-border-color;
  border-radius: $input-border-radius;
  box-shadow: $input-shadow;
  color: $body-text-color;
  line-height: $input-line-height;
  appearance: none;
  transition: $input-transition;
  &[disabled] {
    cursor: not-allowed;
    background-color: $input-disabled-background-color;
    box-shadow: $input-disabled-shadow;
    color: $input-disabled-text-color;
  }
  &[readonly] {
    background-color: $input-readonly-background-color;
    border-color: $input-readonly-border-color;
    box-shadow: $input-readonly-shadow;
    color: $input-readonly-text-color;
  }
  &:focus,
  &[readonly]:focus {
    border-color: $input-focus-border-color;
    box-shadow: $input-focus-shadow;
    outline: none;
  }
  &.is-success {
    border-color: $input-success-border-color;
  }
  &.is-danger {
    background-color: $input-danger-background-color;
    border-color: $input-danger-border-color;
  }
  @include placeholder {
    color: $input-placeholder-color;
  }
}

@include export-style-form() {
  #{$selector-input} {
    &[type="text"],
    &[type="search"],
    &[type="url"],
    &[type="email"],
    &[type="tel"],
    &[type="password"],
    &[type="datetime-local"],
    &[type="date"],
    &[type="month"],
    &[type="week"],
    &[type="time"],
    &[type="number"] {
      @include musubii-style-form-input($input-padding);
    }
  }
  #{$selector-textarea} {
    @include musubii-style-form-input($textarea-padding);
  }
}

//----------------------------------------------------
// / Style - Form Input Round
//----------------------------------------------------

@mixin musubii-style-form-input-round() {
  &.is-round {
    border-radius: $input-round-border-radius;
  }
}

@include export-style-form() {
  #{$selector-input} {
    &[type="text"],
    &[type="search"],
    &[type="url"],
    &[type="email"],
    &[type="tel"],
    &[type="password"],
    &[type="datetime-local"],
    &[type="date"],
    &[type="month"],
    &[type="week"],
    &[type="time"],
    &[type="number"] {
      @include musubii-style-form-input-round();
    }
  }
}

//----------------------------------------------------
// / Style - Form Input Plain
//----------------------------------------------------

@mixin musubii-style-form-input-plain() {
  &.is-plain {
    background-color: $input-plain-background-color;
    border: $input-border-width solid $input-plain-border-color;
    box-shadow: none;
    &[disabled] {
      background-color: $input-disabled-background-color;
    }
    &:focus,
    &[readonly]:focus {
      border-color: $input-focus-border-color;
      box-shadow: $input-plain-focus-shadow;
    }
    &.is-success {
      background-color: $input-success-background-color;
    }
    &.is-danger {
      background-color: $input-danger-background-color;
    }
  }
}

@include export-style-form() {
  #{$selector-input} {
    &[type="text"],
    &[type="search"],
    &[type="url"],
    &[type="email"],
    &[type="tel"],
    &[type="password"],
    &[type="datetime-local"],
    &[type="date"],
    &[type="month"],
    &[type="week"],
    &[type="time"],
    &[type="number"] {
      @include musubii-style-form-input-plain();
    }
  }
  #{$selector-textarea} {
    @include musubii-style-form-input-plain();
  }
}

//----------------------------------------------------
// / Style - Form Input Underline
//----------------------------------------------------

@mixin musubii-style-form-input-underline() {
  &.is-underline {
    padding-left: $input-underline-padding-left;
    padding-right: $input-underline-padding-right;
    background-color: transparent;
    border: none;
    border-bottom: $input-underline-border-width solid
      $input-underline-border-color;
    border-radius: 0;
    box-shadow: none;
    &[disabled],
    &[readonly] {
      background-color: transparent;
    }
    &:focus,
    &[readonly]:focus {
      border-color: $input-focus-border-color;
      box-shadow: none;
    }
    &.is-success {
      border-bottom-color: $input-success-border-color;
    }
    &.is-danger {
      border-bottom-color: $input-danger-border-color;
    }
  }
}

@include export-style-form() {
  #{$selector-input} {
    &[type="text"],
    &[type="search"],
    &[type="url"],
    &[type="email"],
    &[type="tel"],
    &[type="password"],
    &[type="datetime-local"],
    &[type="date"],
    &[type="month"],
    &[type="week"],
    &[type="time"],
    &[type="number"] {
      @include musubii-style-form-input-underline();
    }
  }
  #{$selector-textarea} {
    @include musubii-style-form-input-underline();
  }
}

//----------------------------------------------------
// / Style - Form Input Inside
//----------------------------------------------------

@mixin musubii-style-form-input-inside() {
  &.is-inside {
    padding: $input-inside-padding;
    background-color: transparent;
    border-color: transparent;
    border-radius: 0;
    box-shadow: none;
    &[disabled],
    &[readonly] {
      background-color: transparent;
      border-color: transparent;
    }
    &:focus,
    &[readonly]:focus {
      border-color: transparent;
      box-shadow: none;
    }
    &.is-success {
      background-color: $input-success-background-color;
    }
    &.is-danger {
      background-color: $input-danger-background-color;
    }
  }
}

@include export-style-form() {
  #{$selector-input} {
    &[type="text"],
    &[type="search"],
    &[type="url"],
    &[type="email"],
    &[type="tel"],
    &[type="password"],
    &[type="datetime-local"],
    &[type="date"],
    &[type="month"],
    &[type="week"],
    &[type="time"],
    &[type="number"] {
      @include musubii-style-form-input-inside();
    }
  }
  #{$selector-textarea} {
    @include musubii-style-form-input-inside();
  }
}

//----------------------------------------------------
// / Style - Form Input File
//----------------------------------------------------

@mixin musubii-style-form-input-file() {
  display: none;
}

@include export-style-form() {
  #{$selector-input} {
    &[type="file"] {
      @include musubii-style-form-input-file();
    }
  }
}

//----------------------------------------------------
// / Radio & Checkbox
//----------------------------------------------------

@include export-style-form() {
  .label {
    cursor: pointer;
    display: flex;
    &:not(.is-middle) {
      .radio {
        top: $radio-size * 0.25;
      }
      .checkbox {
        top: $checkbox-size * 0.25;
      }
    }
    &.is-middle {
      align-items: center;
    }
    &.is-center {
      justify-content: center;
      .text:last-child {
        margin-right: 0;
      }
    }
  }
}

@include export-style-form() {
  .radio,
  .checkbox {
    position: relative;
    display: inline-block;
    flex: none;
    &:before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      opacity: 0;
    }
  }
}

@include export-style-form() {
  .radio {
    width: $radio-size;
    height: $radio-size;
    background-color: $radio-background-color;
    border: $radio-border-width solid $input-border-color;
    border-radius: $radio-size * 0.5;
    transition: $radio-transition;
    &:before {
      width: $radio-size * 0.5;
      height: $radio-size * 0.5;
      background-color: $radio-before-checked-background-color;
      border-radius: $radio-size * 0.5 * 0.5;
      transform: translate(-50%, -50%);
      transition: $radio-transition;
    }
  }
}

@include export-style-form() {
  .checkbox {
    width: $checkbox-size;
    height: $checkbox-size;
    background-color: $checkbox-background-color;
    border: $checkbox-border-width solid $input-border-color;
    border-radius: $checkbox-border-radius;
    transition: $checkbox-transition;
    &:before {
      width: $checkbox-size * 0.75;
      height: $checkbox-size * 0.375;
      border-left: $checkbox-size * 0.125 solid $checkbox-before-border-color;
      border-bottom: $checkbox-size * 0.125 solid $checkbox-before-border-color;
      transform: translate(-50%, -70%) rotate(-45deg);
      transition: $checkbox-transition;
    }
  }
}

@include export-style-form() {
  .input[type="radio"],
  .input[type="checkbox"] {
    &[disabled] {
      + .label {
        cursor: not-allowed;
        color: $input-disabled-text-color;
        .radio,
        .checkbox {
          border-color: $input-disabled-border-color;
        }
      }
    }
  }
}

@include export-style-form() {
  .input[type="radio"] {
    &:focus {
      + .label .radio {
        box-shadow: $radio-focus-shadow;
        outline: none;
      }
    }
    &:checked {
      + .label .radio {
        border-color: $radio-checked-border-color;
      }
      + .label .radio:before {
        opacity: 1;
      }
    }
  }
}

@include export-style-form() {
  .input[type="checkbox"] {
    &:focus {
      + .label .checkbox {
        border-color: $checkbox-focus-border-color;
        box-shadow: $checkbox-focus-shadow;
        outline: none;
      }
    }
    &:checked {
      + .label .checkbox {
        background-color: $checkbox-checked-background-color;
        border-color: $checkbox-checked-border-color;
      }
      + .label .checkbox:before {
        opacity: 1;
      }
    }
  }
}

//----------------------------------------------------
// / Select
//----------------------------------------------------

@include export-style-form() {
  .select {
    position: relative;
    display: inline-flex;
    > select {
      cursor: pointer;
      flex: none;
      width: 100%;
      height: calc(#{$input-height} + (#{$input-border-width} * 2));
      padding: $input-padding;
      background-color: $input-background-color;
      border: $input-border-width solid $input-border-color;
      border-radius: $input-border-radius;
      color: $body-text-color;
      line-height: $input-line-height;
      transition: $select-transition;
      appearance: none;
      &[disabled] {
        cursor: not-allowed;
        background-color: $input-disabled-background-color;
        color: $input-disabled-text-color;
        > option {
          color: $input-disabled-text-color;
        }
      }
      &[readonly] {
        background-color: $input-readonly-background-color;
        color: $input-readonly-text-color;
      }
      &:focus,
      &[readonly]:focus {
        border-color: $input-focus-border-color;
        box-shadow: $select-focus-shadow;
        outline: none;
      }
      &::-ms-expand {
        display: none;
      }
    }
    &:not(.is-multiple) {
      &:after {
        content: "";
        pointer-events: none;
        position: absolute;
        top: 50%;
        right: ($select-angle-size * 2);
        width: $select-angle-size;
        height: $select-angle-size;
        border-bottom: $select-angle-border-width solid
          $select-angle-border-color;
        border-right: $select-angle-border-width solid
          $select-angle-border-color;
        transform: translateY(-70%) rotate(45deg);
      }
      > select {
        padding-right: ($select-angle-size * 5);
      }
    }
  }
}

@include export-style-form() {
  .select {
    &.is-success {
      > select {
        border-color: $input-success-border-color;
      }
    }
    &.is-danger {
      > select {
        background-color: $input-danger-background-color;
        border-color: $input-danger-border-color;
      }
    }
  }
}

@include export-style-form() {
  .select {
    @each $custom in $pattern-input-custom {
      @if $custom == "round" {
        &.is-round:not(.is-multiple) {
          > select {
            border-radius: $input-round-border-radius;
          }
        }
      }
    }
  }
}

@include export-style-form() {
  .select {
    @each $style in $pattern-input-style {
      @if $style == "plain" {
        &.is-plain {
          > select {
            background-color: $input-plain-background-color;
            border: $input-border-width solid transparent;
            &[disabled] {
              background-color: $input-disabled-background-color;
            }
            &:focus,
            &[readonly]:focus {
              border-color: $input-focus-border-color;
            }
          }
          &.is-success {
            > select {
              background-color: $input-success-background-color;
            }
          }
          &.is-danger {
            > select {
              background-color: $input-danger-background-color;
            }
          }
        }
      }
      @if $style == "underline" {
        &.is-underline {
          > select {
            padding-left: $input-underline-padding-left;
            background-color: transparent;
            border: none;
            border-bottom: $input-underline-border-width
              solid
              $input-underline-border-color;
            border-radius: 0;
            box-shadow: none;
            &[disabled],
            &[readonly] {
              background-color: transparent;
            }
            &:focus,
            &[readonly]:focus {
              border-color: $input-focus-border-color;
              box-shadow: none;
            }
          }
          &.is-success {
            > select {
              border-bottom-color: $input-success-border-color;
            }
          }
          &.is-danger {
            > select {
              border-bottom-color: $input-danger-border-color;
            }
          }
        }
      }
      @if $style == "inside" {
        &.is-inside {
          > select {
            padding: $input-inside-padding;
            background-color: transparent;
            border-color: transparent;
            border-radius: 0;
            box-shadow: none;
            &[disabled],
            &[readonly] {
              background-color: transparent;
              border-color: transparent;
            }
            &:focus,
            &[readonly]:focus {
              border-color: transparent;
              box-shadow: none;
            }
          }
          &:not(.is-multiple) {
            > select {
              padding-right: ($select-angle-size * 5);
            }
          }
          &.is-success {
            > select {
              background-color: $input-success-background-color;
            }
          }
          &.is-danger {
            > select {
              background-color: $input-danger-background-color;
            }
          }
        }
      }
    }
  }
}

@include export-style-form() {
  .select.is-multiple > select {
    height: auto;
    padding: 0;
    > option {
      min-height: 1.5em;
      padding: 0.5em 0.75em;
    }
  }
}
